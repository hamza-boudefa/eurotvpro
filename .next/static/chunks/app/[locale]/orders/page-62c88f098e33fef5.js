(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[563],{2524:(e,t,a)=>{Promise.resolve().then(a.bind(a,5351))},5351:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(5155),r=a(2115),l=a(2651),n=a(9124),i=a(4057);let c=(0,i.A)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),d=(0,i.A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),o=(0,i.A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),x=(0,i.A)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var p=a(2645),h=a(4047),m=a.n(h);function u(){let[e,t]=(0,r.useState)([]),[a,i]=(0,r.useState)(new Set),[h,u]=(0,r.useState)(1),[y,g]=(0,r.useState)(1),[j,N]=(0,r.useState)(!1),[w,f]=(0,r.useState)(()=>localStorage.getItem("adminOrdersFilter")||"all"),[b,v]=(0,r.useState)(""),[k,C]=(0,r.useState)(""),[A,S]=(0,r.useState)(""),[E,M]=(0,r.useState)(""),[O,L]=(0,r.useState)(""),P=async()=>{N(!0);try{var e,a;let s=await l.A.get("".concat("https://eurotvpro-eurotvpro-back.jvskd1.easypanel.host","/admin/orders"),{params:{page:h,filter:w,fullName:b,status:k,email:E,phoneNumber:O}});t((null===(e=s.data)||void 0===e?void 0:e.orders)||[]),g((null===(a=s.data)||void 0===a?void 0:a.totalPages)||1)}catch(e){console.error("Error fetching orders:",e)}finally{N(!1)}},F=async(e,t)=>{try{let a=await l.A.put("".concat("https://eurotvpro-eurotvpro-back.jvskd1.easypanel.host","/api/updateOrderStatus/").concat(e),{status:t});console.log("Order status updated:",a.data),P()}catch(e){console.error("Error updating order status:",e)}};(0,r.useEffect)(()=>{P()},[h,w,b,k,A,E,O]),(0,r.useEffect)(()=>{localStorage.setItem("adminOrdersFilter",w)},[w]);let D=e=>{i(t=>{let a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a})},_=e=>{f(e),u(1)},R=e=>new Date(e).toLocaleDateString(),W=m()(e=>{v(e)},1e3),q=m()(e=>{M(e)},1e3),V=m()(e=>{L(e)},1e3);return(0,r.useEffect)(()=>()=>{W.cancel(),q.cancel(),V.cancel()},[]),(0,s.jsxs)("div",{className:"admin-orders bg-black text-white min-h-screen py-8 px-4 sm:px-6 lg:px-8 z-[9999999]",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-6 text-gray-100",children:"Admin - Orders"}),(0,s.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"space-x-2",children:[(0,s.jsx)("button",{onClick:()=>_("all"),className:"px-3 py-1 rounded ".concat("all"===w?"bg-blue-600":"bg-gray-700"),children:"All"}),(0,s.jsx)("button",{onClick:()=>_("today"),className:"px-3 py-1 rounded ".concat("today"===w?"bg-blue-600":"bg-gray-700"),children:"Today"}),(0,s.jsx)("button",{onClick:()=>_("lastWeek"),className:"px-3 py-1 rounded ".concat("lastWeek"===w?"bg-blue-600":"bg-gray-700"),children:"Last Week"}),(0,s.jsx)("button",{onClick:()=>_("lastMonth"),className:"px-3 py-1 rounded ".concat("lastMonth"===w?"bg-blue-600":"bg-gray-700"),children:"Last Month"}),(0,s.jsx)("input",{type:"text",placeholder:"Full Name",defaultValue:b,onChange:e=>W(e.target.value),className:"px-3 py-1 rounded bg-gray-700 text-white"}),(0,s.jsxs)("select",{defaultValue:k,onChange:e=>C(e.target.value),className:"px-3 py-1 rounded bg-gray-700 text-white",children:[(0,s.jsx)("option",{value:"",children:"All Statuses"}),(0,s.jsx)("option",{value:"on hold",children:"On Hold"}),(0,s.jsx)("option",{value:"confirmed",children:"Confirmed"})]}),(0,s.jsx)("input",{type:"text",placeholder:"Email",defaultValue:E,onChange:e=>q(e.target.value),className:"px-3 py-1 rounded bg-gray-700 text-white"}),(0,s.jsx)("input",{type:"text",placeholder:"Phone Number",defaultValue:O,onChange:e=>V(e.target.value),className:"px-3 py-1 rounded bg-gray-700 text-white"}),(0,s.jsx)("button",{onClick:()=>{v(""),C(""),S(""),M(""),L(""),f("all"),u(1)},className:"px-3 py-1 rounded bg-gray-700 hover:bg-gray-600",children:"Reset Filters"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("button",{onClick:()=>{P()},className:"p-1 bg-gray-700 rounded hover:bg-gray-600 transition-colors duration-200",disabled:j,children:(0,s.jsx)(c,{className:"w-5 h-5 ".concat(j?"animate-spin":"")})}),(0,s.jsx)("button",{onClick:()=>u(e=>Math.max(e-1,1)),disabled:1===h||j,className:"p-1 bg-gray-700 rounded disabled:opacity-50",children:(0,s.jsx)(d,{className:"w-5 h-5"})}),(0,s.jsxs)("span",{className:"whitespace-nowrap",children:[h," / ",y]}),(0,s.jsx)("button",{onClick:()=>u(e=>Math.min(e+1,y)),disabled:h===y||j,className:"p-1 bg-gray-700 rounded disabled:opacity-50",children:(0,s.jsx)(o,{className:"w-5 h-5"})})]})]}),j?(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full bg-gray-800 shadow-lg rounded-lg overflow-hidden",children:[(0,s.jsx)("thead",{className:"bg-gray-700",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Date"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Name"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Email"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Phone"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Payment"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Total"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Confirmation Date"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Items"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-700",children:e.map(e=>(0,s.jsxs)(r.Fragment,{children:[(0,s.jsxs)(n.P.tr,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"bg-black hover:bg-gray-700 transition-colors duration-150 ease-in-out",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-300",children:R(e.createdAt)})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"text-sm font-medium text-gray-100",children:[e.firstName," ",e.lastName]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-300",children:e.email})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-300",children:e.phoneNumber})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-300",children:e.paymentMethod})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"text-sm font-medium text-green-400",children:[e.totalAmount,"€"]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("select",{value:e.status||"on hold",onChange:t=>F(e.id,t.target.value),className:"bg-gray-700 text-white px-2 py-1 rounded",children:[(0,s.jsx)("option",{value:"on hold",children:"On Hold"}),(0,s.jsx)("option",{value:"confirmed",children:"Confirmed"})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:"confirmed"===e.status?R(e.updatedAt):"N/A"}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("button",{className:"flex items-center text-blue-400 hover:text-blue-300 transition-colors duration-200",onClick:()=>D(e.id),children:a.has(e.id)?(0,s.jsxs)(s.Fragment,{children:["Hide ",(0,s.jsx)(x,{className:"ml-1"})]}):(0,s.jsxs)(s.Fragment,{children:["Show ",(0,s.jsx)(p.A,{className:"ml-1"})]})})})]}),a.has(e.id)&&(0,s.jsx)(n.P.tr,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:(0,s.jsx)("td",{colSpan:9,className:"px-6 py-4 bg-gray-700",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-600",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Duration"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Price"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Quantity"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-600",children:e.items.map((e,t)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-300",children:e.duration}),(0,s.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-300",children:[e.price,"€"]}),(0,s.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-300",children:e.quantity})]},t))})]})})})]},e.id))})]})})]})}},4057:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var s=a(2115);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:d="",children:o,iconNode:x,...p}=e;return(0,s.createElement)("svg",{ref:t,...n,width:r,height:r,stroke:a,strokeWidth:c?24*Number(i)/Number(r):i,className:l("lucide",d),...p},[...x.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(o)?o:[o]])}),c=(e,t)=>{let a=(0,s.forwardRef)((a,n)=>{let{className:c,...d}=a;return(0,s.createElement)(i,{ref:n,iconNode:t,className:l("lucide-".concat(r(e)),c),...d})});return a.displayName="".concat(e),a}},2645:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(4057).A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[651,790,441,517,358],()=>t(2524)),_N_E=e.O()}]);