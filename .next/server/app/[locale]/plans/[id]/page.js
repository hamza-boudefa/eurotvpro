(()=>{var e={};e.id=176,e.ids=[176],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},2733:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>l.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var a=s(70260),t=s(28203),n=s(25155),l=s.n(n),o=s(67292),i={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);s.d(r,i);let d=["",{children:["[locale]",{children:["plans",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,20431)),"C:\\Users\\hamza\\OneDrive\\Desktop\\eurotvpro\\src\\app\\[locale]\\plans\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,51341)),"C:\\Users\\hamza\\OneDrive\\Desktop\\eurotvpro\\src\\app\\[locale]\\layout.tsx"],loading:[()=>Promise.resolve().then(s.bind(s,56619)),"C:\\Users\\hamza\\OneDrive\\Desktop\\eurotvpro\\src\\app\\[locale]\\loading.tsx"]}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,41485,23)),"next/dist/client/components/unauthorized-error"]}],c=["C:\\Users\\hamza\\OneDrive\\Desktop\\eurotvpro\\src\\app\\[locale]\\plans\\[id]\\page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/[locale]/plans/[id]/page",pathname:"/[locale]/plans/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},47351:(e,r,s)=>{Promise.resolve().then(s.bind(s,20431))},495:(e,r,s)=>{Promise.resolve().then(s.bind(s,36035))},36035:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>i});var a=s(45512),t=s(58009),n=s(79334),l=s(28531),o=s.n(l);async function i({params:e}){let r=(0,n.useRouter)(),s="new"===(await e).id,l=s?null:Number.parseInt((await e).id),[i,d]=(0,t.useState)(!s),[c,u]=(0,t.useState)(!1),[p,h]=(0,t.useState)("en"),[m,x]=(0,t.useState)(null),[g,b]=(0,t.useState)({show:!1}),[f,v]=(0,t.useState)({price:0,isBestValue:!1,translations:[{language:"en",duration:"",features:[]},{language:"fr",duration:"",features:[]},{language:"de",duration:"",features:[]},{language:"es",duration:"",features:[]},{language:"ar",duration:"",features:[]}]}),y=(e,r,s)=>{v(a=>{let t=a.translations.map(a=>a.language===e?{...a,[r]:s}:a);return{...a,translations:t}})},j=(e,r)=>{y(e,"features",r.split("\n").filter(e=>""!==e.trim()))},w=async()=>{try{if(u(!0),f.price<=0){x({show:!0,title:"Validation Error",message:"Price must be greater than 0",type:"error"}),u(!1);return}let e=f.translations.find(e=>"en"===e.language);if(!e||!e.duration||0===e.features.length){x({show:!0,title:"Validation Error",message:"English translation is required with duration and at least one feature",type:"error"}),u(!1);return}let a={price:f.price,isBestValue:f.isBestValue,translations:{}};if(f.translations.forEach(e=>{(e.duration||e.features.length>0)&&(a.translations[e.language]={duration:e.duration,features:e.features})}),!(s?await fetch("/api/CreatePlan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}):await fetch(`/api/updatePlan/${l}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({price:f.price,isBestValue:f.isBestValue,translations:f.translations})})).ok)throw Error(s?"Failed to create plan":"Failed to update plan");x({show:!0,title:"Success",message:s?"Plan created successfully":"Plan updated successfully",type:"success"}),r.push("/plans")}catch(e){console.error("Error saving plan:",e),x({show:!0,title:"Error",message:s?"Failed to create plan":"Failed to update plan",type:"error"})}finally{u(!1)}},N=async()=>{if(!s)try{if(u(!0),!(await fetch(`/api/deletePlan/${l}`,{method:"DELETE"})).ok)throw Error("Failed to delete plan");x({show:!0,title:"Success",message:"Plan deleted successfully",type:"success"}),r.push("/plans")}catch(e){console.error("Error deleting plan:",e),x({show:!0,title:"Error",message:"Failed to delete plan. Please try again.",type:"error"})}finally{u(!1),b({show:!1})}};return i?(0,a.jsx)("div",{className:"container mx-auto py-10 px-4 flex items-center justify-center min-h-[50vh]",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("div",{className:"h-8 w-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("p",{children:"Loading plan details..."})]})}):(0,a.jsxs)("div",{className:"container mx-auto py-10 px-4",children:[m&&m.show&&(0,a.jsx)("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-md shadow-md max-w-md ${"success"===m.type?"bg-green-100 border border-green-200":"bg-red-100 border border-red-200"}`,children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:`font-medium ${"success"===m.type?"text-green-800":"text-red-800"}`,children:m.title}),(0,a.jsx)("p",{className:`text-sm ${"success"===m.type?"text-green-700":"text-red-700"}`,children:m.message})]}),(0,a.jsx)("button",{onClick:()=>x(null),className:`ml-4 ${"success"===m.type?"text-green-600":"text-red-600"} hover:opacity-75`,children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})}),g.show&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Are you absolutely sure?"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"This action cannot be undone. This will permanently delete the plan and all its translations."}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)("button",{onClick:()=>b({show:!1}),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,a.jsx)("button",{onClick:N,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Delete"})]})]})}),(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o(),{href:"/plans",children:(0,a.jsx)("button",{className:"p-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})})}),(0,a.jsx)("h1",{className:"text-3xl font-bold",children:s?"Create New Plan":"Edit Plan"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[!s&&(0,a.jsxs)("button",{onClick:()=>b({show:!0}),className:"px-4 py-2 border border-gray-300 rounded-md text-red-600 hover:bg-red-50 flex items-center",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]}),(0,a.jsx)("button",{onClick:w,disabled:c,className:`px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 flex items-center ${c?"opacity-75 cursor-not-allowed":""}`,children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"Save"]})})]})]}),(0,a.jsxs)("div",{className:"grid gap-6",children:[(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg bg-white shadow-sm",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Plan Details"})}),(0,a.jsx)("div",{className:"p-6 space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700",children:"Price"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),(0,a.jsx)("input",{id:"price",type:"number",min:"0",step:"0.01",value:f.price,onChange:e=>{let r=Number.parseFloat(e.target.value)||0;v(e=>({...e,price:r}))},className:"pl-7 w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 pt-8",children:[(0,a.jsx)("input",{type:"checkbox",id:"best-value",checked:f.isBestValue,onChange:e=>{v(r=>({...r,isBestValue:e.target.checked}))},className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,a.jsx)("label",{htmlFor:"best-value",className:"text-sm font-medium text-gray-700",children:'Mark as "Best Value" plan'})]})]})})]}),(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg bg-white shadow-sm",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Plan Translations"})}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsx)("nav",{className:"flex -mb-px space-x-8",children:["en","fr","de","es","ar"].map(e=>(0,a.jsx)("button",{onClick:()=>h(e),className:`py-4 px-1 border-b-2 font-medium text-sm ${p===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"en"===e?"English":"fr"===e?"French":"de"===e?"German":"es"===e?"Spanish":"Arabic"},e))})}),(0,a.jsx)("div",{className:"mt-4",children:f.translations.map(e=>(0,a.jsxs)("div",{className:`space-y-4 ${p===e.language?"block":"hidden"}`,children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:`duration-${e.language}`,className:"block text-sm font-medium text-gray-700",children:"Duration"}),(0,a.jsx)("input",{id:`duration-${e.language}`,placeholder:"en"===e.language?"e.g., Monthly":`Duration in ${e.language}`,value:e.duration,onChange:r=>y(e.language,"duration",r.target.value),className:"w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"en"===e.language?"Required. Example: Monthly, Yearly, Lifetime, etc.":`Translation for "${f.translations.find(e=>"en"===e.language)?.duration||"Duration"}"`})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:`features-${e.language}`,className:"block text-sm font-medium text-gray-700",children:"Features"}),(0,a.jsx)("textarea",{id:`features-${e.language}`,placeholder:"en"===e.language?"Enter features (one per line)":`Features in ${e.language} (one per line)`,value:e.features.join("\n"),onChange:r=>j(e.language,r.target.value),rows:6,className:"w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"en"===e.language?"Required. Enter one feature per line.":"Enter one feature per line. These should be translations of the English features."})]})]},e.language))})]})]})]})]})}},20431:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>a});let a=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\hamza\\\\OneDrive\\\\Desktop\\\\eurotvpro\\\\src\\\\app\\\\[locale]\\\\plans\\\\[id]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\hamza\\OneDrive\\Desktop\\eurotvpro\\src\\app\\[locale]\\plans\\[id]\\page.tsx","default")}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),a=r.X(0,[403,549,473],()=>s(2733));module.exports=a})();